<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动态规划（一） | BY 的前端笔记</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="a repo about notes">
    <meta name="theme-color" content="#ffffff">
    <link rel="preload" href="/front-end-interview-summary/assets/css/0.styles.4db39399.css" as="style"><link rel="preload" href="/front-end-interview-summary/assets/js/app.2e0fc13c.js" as="script"><link rel="preload" href="/front-end-interview-summary/assets/js/2.7f7891e4.js" as="script"><link rel="preload" href="/front-end-interview-summary/assets/js/10.007deec9.js" as="script"><link rel="preload" href="/front-end-interview-summary/assets/js/12.bca498eb.js" as="script"><link rel="prefetch" href="/front-end-interview-summary/assets/js/11.654a1f38.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/13.5e396d6e.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/14.efde4dad.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/15.159b4fae.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/16.58e2bf1f.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/17.ef3e3bd6.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/18.293a93d5.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/19.9e1d30d3.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/20.08bf4a15.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/21.53dc31b6.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/22.08c85132.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/23.3f3175a7.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/24.1c9921fd.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/25.104177c6.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/26.2b595903.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/27.7f0758dd.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/28.adcc186d.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/29.bbc36af8.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/3.9caf16ee.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/30.fd89296c.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/31.85aab8c9.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/32.2aecae5c.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/33.acdd6ea2.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/34.3380eee3.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/35.750da1d3.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/36.881274ef.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/37.1d77fbe6.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/38.ee0bf670.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/39.ceea38be.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/4.bc9fd2ea.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/40.e469df3b.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/41.5864648b.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/42.2175c885.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/43.25405ef6.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/44.b315c61d.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/45.2406a059.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/46.1cd0efc6.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/47.d2491388.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/48.9aba6c28.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/49.c102cbb5.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/5.60105b4e.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/50.46d7dfc7.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/51.bcfb2d25.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/52.dae953b1.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/53.86ae24f0.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/54.17d39238.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/55.ddea87d9.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/56.8f4747cc.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/57.46fbd2e6.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/6.995cd0a0.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/7.228d03a2.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/8.019ed6a2.js"><link rel="prefetch" href="/front-end-interview-summary/assets/js/9.cff9bb9a.js">
    <link rel="stylesheet" href="/front-end-interview-summary/assets/css/0.styles.4db39399.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/front-end-interview-summary/" class="home-link router-link-active"><!----> <span class="site-name">BY 的前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/front-end-interview-summary/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/network/http/" class="nav-link">
  HTTP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/Mom-I-Cant-Learn-Anymore/" class="nav-link">
  《妈妈，我学不动了》
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/front-end-thinking/" class="nav-link">
  《前端思考录》
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-interview-summary/algorithm/" class="nav-link router-link-active">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统设计" class="dropdown-title"><span class="title">系统设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/system-design/why-is-the-design/" class="nav-link">
  《为什么这么设计》
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-interview-summary/thinking-more/" class="nav-link">
  独立思考屋
</a></div> <a href="https://github.com/BruceYuj/front-end-interview-summary" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/front-end-interview-summary/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><span class="title">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/network/http/" class="nav-link">
  HTTP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/browser/" class="nav-link">
  浏览器
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/Mom-I-Cant-Learn-Anymore/" class="nav-link">
  《妈妈，我学不动了》
</a></li><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/front-end/front-end-thinking/" class="nav-link">
  《前端思考录》
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-interview-summary/algorithm/" class="nav-link router-link-active">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统设计" class="dropdown-title"><span class="title">系统设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-interview-summary/system-design/why-is-the-design/" class="nav-link">
  《为什么这么设计》
</a></li></ul></div></div><div class="nav-item"><a href="/front-end-interview-summary/thinking-more/" class="nav-link">
  独立思考屋
</a></div> <a href="https://github.com/BruceYuj/front-end-interview-summary" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ALGORITHM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front-end-interview-summary/algorithm/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/front-end-interview-summary/algorithm/1-algorithms-learning-general-outline.html" class="sidebar-link">今日做题家 - 面试算法题教程系列总纲</a></li><li><a href="/front-end-interview-summary/algorithm/2-merge-sort-and-questions.html" class="sidebar-link">算法 - 归并排序与题目应用</a></li><li><a href="/front-end-interview-summary/algorithm/3-quick-sort-and-quick-select.html" class="sidebar-link">算法 - 快速排序与快速选择</a></li><li><a href="/front-end-interview-summary/algorithm/4-binary-search-template-1.html" class="sidebar-link">二分法专题（一）</a></li><li><a href="/front-end-interview-summary/algorithm/5-binary-search-template-2.html" class="sidebar-link">二分法专题（二）</a></li><li><a href="/front-end-interview-summary/algorithm/6-dynamic-programming.html" aria-current="page" class="active sidebar-link">动态规划（一）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end-interview-summary/algorithm/6-dynamic-programming.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/front-end-interview-summary/algorithm/6-dynamic-programming.html#正文" class="sidebar-link">正文</a></li><li class="sidebar-sub-header"><a href="/front-end-interview-summary/algorithm/6-dynamic-programming.html#其他例题" class="sidebar-link">其他例题</a></li></ul></li><li><a href="/front-end-interview-summary/algorithm/10-big-int-operation.html" class="sidebar-link">算法面试套路之 - 大整数运算</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <blockquote><p>在我看来，大部分面试的算法题从来都不是难在思维，而是缺乏系统的教学。它不像数学属于普及的基础教育，算法题目的大部分知识、技巧往往都局限于 competitive programming 当中 (比如各种 OI 竞赛、 ACM 竞赛等)，这些都是大部分计算机行业从业者接触不到的。它就像一个大群体中一个半封闭的小群体一样，系统的知识就在那里，只是我们很少会主动走进去。因此，我期望将这些知识给带出来，就引申出了本系列文章和视频。</p></blockquote> <p>动态规划不是指的某种具体算法（比如 dijkstra 单源最短路），而是属于一种经典的思考方式，在算法竞赛和面试/笔试中其一向是宠儿。追溯其本源，是由著名数学家 R.Bellman 等人在研究 <strong>多阶段决策过程</strong> 的优化问题而创立的，当前属于 <strong>运筹学</strong> 的分支之一。</p> <p>而回归到算法问题当中，动态规划受宠的原因之一就是它不存在统一的处理方法，而需要我们根据具体的问题性质加上一些技巧结合来处理。这样能够让企业/竞赛方更加真实的考察应试者的思维能力。不过这点变化仍然挡不住经历过高考洗礼的我们，毕竟应试、刷题已经融入到大部分同学的血液里了。</p> <p>在实际做题过程中，通常会遇到以下几个问题：</p> <ol><li>阅读完题目后，无法想出具体的思路，比如无法将题意和动态规划思路联系起来。</li> <li>有了思路，无法写出具体代码或者迷失在各种边界细节当中</li></ol> <p>对于问题 1，我们可以和另外一个常见现象联系起来：每次看完别人题解后总会有恍然大悟之感（尤其对于已经刷了小几百道题目的同学），但是下次题意一变化，却又不会做了。这种现象非常类似于“老师一讲就懂，自己一做就不会”。该现象的本质原因如下：<strong>题解</strong> 或者 <strong>老师的讲解</strong> 属于在多种知识点之间建立了明确的连接，学生只需理解知识点与知识点之间的跳跃即可。而当自己去做的时候，则需要我们先在非常繁杂的知识点海洋当中根据题意线索抽丝剥茧，寻找到初始考察的知识点，然后再根据个人经验（前期系统学习加上个人总结）寻找到整道题目的知识脉络来得到答案。</p> <p>那么对于问题 1，我们是否能够解决或者能否通过某种<strong>刻意地训练</strong>来改善呢？</p> <blockquote><p>在这里，我们暂且不把范围扩大到<strong>更广义地知识学习</strong>，就将范围约束在应试算法领域当中。</p></blockquote> <p><img src="/front-end-interview-summary/assets/img/6-1.d4e74911.jpg" alt="">
(图 6-1)</p> <ol><li>攻克问题 1 的第一步就是，分别单独理解<strong>应试算法</strong>领域中的所有知识点，比如图论中的<strong>单源最短路</strong>。而由于<strong>应试算法</strong>的范围限定较多，考察也更多偏向于实现而非证明，所以这块内容难度并不会很大（相比于数学等纯粹学科来讲）</li> <li>第二步，通过每个知识点的经典例题加深知识点理解。这块在基础竞赛教育中已经非常系统了。</li> <li>第三步，也是最难的一步。我们知道在规模为 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-math></mjx-container> 的点之间建立两两关联，就已经达到了 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="O"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-script style="vertical-align:0.363em;"><mjx-mn size="s" class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-math></mjx-container> 级别的计算量，更何况还存在更加复杂的关系。很少有人能够完全覆盖所有的知识点关联（题目也在每年不断扩展中）。在此时，我们应该停下脚步思考下我们学习算法的目的究竟是什么？<strong>只是为了应对面试</strong>？<strong>为了挑战自己的极限</strong>？目的不同你所花的精力也应该有所侧重，毕竟算法只是多个知识领域中的一个而已。而本课程的基调主要在于前者，稍微带点后者。因此，类似于<strong>后缀数组</strong>、<strong>后缀自动机</strong>这类较偏、较进阶的知识点我们就不会讲了。</li></ol> <p>回归到 <strong>动态规划</strong>，我不想一下子给大家抛出太多的概念性术语，具体的概念我们会在总结的时候再讲解。但是，提前把名称给出来还是有必要的。</p> <p>动态规划中常用的术语有如下几个：</p> <ul><li>阶段</li> <li>状态</li> <li>状态转移方程</li> <li>无后效性</li> <li>决策</li> <li>重叠子问题</li> <li>最优子结构性质</li></ul> <p>尽管如上文所说，动态规划非常的灵活，没有特别固定的套路。但随着多年的信息竞赛发展，众多前辈仍然将很多经典例题进行了归类，并总结出不少的模板。而这些经典例题以及类别也是我们动态规划章节的主题。具体细分如下：</p> <ol><li>线性 DP
<ul><li>数字三角形模型</li> <li>最长上升子序列模型</li> <li>背包模型</li> <li>状态机模型</li></ul></li> <li>区间 DP</li> <li>数位 DP</li> <li>状态压缩 DP</li> <li>树形 DP</li> <li>DAG 上的 DP</li> <li>DP 优化
<ul><li>单调队列优化</li> <li>斜率优化</li> <li>四边形不等式优化</li></ul></li></ol> <blockquote><p>而这里，更稀少的 <strong>插头DP</strong>、<strong>基环树DP</strong>、<strong>概率DP</strong>、<strong>动态DP</strong>我们就不讲解了</p></blockquote> <h2 id="正文"><a href="#正文" class="header-anchor">#</a> 正文</h2> <p>遍寻多本竞赛参考书，对于线性 DP 的定义并不具体，原因可能在于不理解该特性并不会影响我们完成题目。而本文的线性 DP 的概念来自于《算法竞赛进阶指南》一书：</p> <blockquote><p>线性 DP：指的是具有线性 “阶段” 划分的动态规划算法被统称为线性 DP。因此线性 DP 并不局限于 “线性时间复杂度” 的一维动态规划，如果一个动态规划算法的“状态”包含多个维度，但在每个维度都具有“线性”变化的“阶段”，仍然可以被称为“线性 DP”。</p></blockquote> <p>理论性概念暂不多说，我们直接通过题目来加深对动态规划的理解。</p> <p>第一个要讲解的内容是：<strong>数字三角形模型</strong></p> <p>该模型起源于 <strong>IOI 1994</strong>，由于其考察内容之经典，在如今已经成为了动态规划的经典入门题目，并且不断变形出现在不同的赛场之上。</p> <p><img src="/front-end-interview-summary/assets/img/6-2.213458c2.png" alt="">
(图 6-2)</p> <p>在看到题目的时候，我们暂且不要先入为主，直接进入动态规划的思路（避免虚假的理解）。我们先抽取出题意来：</p> <ol><li>在所有合法的路径中获取路径和最大的路径</li> <li>路径和为路径中所有数字的和</li> <li>合法路径指的是不会越界，并且每步决策只能往左下或右下走</li></ol> <p>面对这样的题意，我们最朴素的想法就是<strong>枚举所有的可能路径，在枚举过程中计算路径和，比较得出最大和</strong> <img src="/front-end-interview-summary/assets/img/6-3.10fd1438.jpg" alt="">
代码也很容易得到：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token builtin">input</span> <span class="token operator">=</span> sys<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span>readline

<span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> r<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
    
    res <span class="token operator">=</span> <span class="token number">0</span>
    res <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dfs<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> dfs<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
    
    <span class="token keyword">return</span> res


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    r <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">]</span>
    ans <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">:</span>
        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    ans <span class="token operator">=</span> dfs<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span>
</code></pre></div><p>整体代码的思路和题意的思路是一致的，就是直接<strong>模拟路径行走的过程</strong>，从第一行开始，到最后一行结束，在每个点有两种可能决策：<strong>向左下或者右下</strong>。</p> <p>假设共有 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-math></mjx-container> 行，每行有两种决策，每次决策时间复杂度为 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="O"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-math></mjx-container>, 因此时间复杂度为 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="O"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-msup><mjx-mn class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn><mjx-script style="vertical-align:0.363em;"><mjx-mi size="s" class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-math></mjx-container>。</p> <p>上述代码稍微学过一点 <strong>dfs</strong> 的同学就能直接写出来，但是这里面仍然隐含另外一重深意：<strong>阶段</strong> - 我们理所当然的将每一行当作了一个阶段的划分依据，这是我们大脑直接模拟给出的，因为符合我们的日常生活场景。但是，很多时候题目给出的模型是抽象的，且很难映射联想，此时就需要多加注意了。</p> <p>仔细模拟下我们会发现，在整个 <strong>dfs</strong> 的过程中会产生大量如下图所示的重复计算。</p> <p><img src="/front-end-interview-summary/assets/img/6-4.229ed489.jpg" alt="">
(图 6-4)</p> <p>减少重复计算的方法之一就是用内存将其存储起来，也就是<strong>空间换时间</strong>。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token builtin">input</span> <span class="token operator">=</span> sys<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span>readline
sys<span class="token punctuation">.</span>setrecursionlimit<span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> r<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
        <span class="token keyword">return</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>

    <span class="token keyword">if</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token keyword">return</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>    

    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>dfs<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> dfs<span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
    
    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    r <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">]</span>
    dp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">]</span>
    ans <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">:</span>
        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    ans <span class="token operator">=</span> dfs<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span>
</code></pre></div><p>这也是我们所说的 <strong>记忆化递归</strong>，或者叫做 <strong>从上到下的 DP</strong>。这种微小的变化直接将时间复杂度降低到 <mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mi class="mjx-i"><mjx-c c="O"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c c="("></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c c="n"></mjx-c></mjx-mi><mjx-script style="vertical-align:0.363em;"><mjx-mn size="s" class="mjx-n"><mjx-c c="2"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c c=")"></mjx-c></mjx-mo></mjx-math></mjx-container> 级别。</p> <p>在这里，计算时间复杂度的技巧是直接统计<strong>可能状态</strong>的数量。</p> <blockquote><p>注意： 这里 <code>sys.setrecursionlimit(1500)</code> 避免递归过深报 Runtime Error 错误</p></blockquote> <p>从这里，我们更加深入的思考 <code>dp[i][j]</code> 是否有更多意义？</p> <p>从上述代码来看，<code>dp[i][j]</code> 其实存储的是：<strong>从坐标(i, j) 开始走到最后一行的最大值</strong></p> <p>这样我们就将问题从 <strong>(0, 0) 开始走到最后一行的最大值</strong> 一般化到 <strong>(i, j) 开始走到最后一行的最大值</strong>。</p> <p>在这里，我们就可以将这种一般化定义为 <strong>状态</strong>（后面我们将 <code>(i, j)</code> 称为状态）。很明显，最后一行的所有 <strong>状态</strong> 可以直接求解，也就是所谓的<strong>最简单子问题</strong>。而整个问题的求解都是 <strong>最大值</strong>，属于<strong>最值</strong> 的一种，也就引出了<strong>最优子结构</strong>的概念。</p> <p>很明显的是，<code>(i, j)</code> 状态在被求解出来之后，不会受到 <code>(i-k, j1)</code> 的影响，也就是所谓的 <strong>无后效性</strong>。</p> <p>那么状态转移方程该如何得出来呢？</p> <p>在这里我们引入一种新的思考方式 - <strong>从集合角度思考状态转换</strong>（来源于 yxc - NOI 金牌得主）：
<img src="/front-end-interview-summary/assets/img/6-5.18f11d34.jpg" alt=""></p> <p><strong>最简单状态的表示</strong> 是另外一个难点（数字三角形模型不存在问题，但是其他问题则需要好好思考一番，避免以后出错，比如部分背包问题的变形）</p> <p><strong>在这里，我仍然需要强调的是，上述无论是从朴素-&gt;记忆化-&gt; dp，还是集合论思考，都只能减缓你思考的坡度，减少你思考的心智负担。而不能代替你思考，也不能帮助你如易筋经一般一通百通。动态规划的灵活性仍然需要你在上述两种思考方式的基础上大量经典例题的练习。</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    r <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">]</span>
    f <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">:</span>
        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>r<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> i <span class="token operator">==</span> r<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
                f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="其他例题"><a href="#其他例题" class="header-anchor">#</a> 其他例题</h2> <p>https://www.acwing.com/problem/content/description/277/</p> <p>https://leetcode-cn.com/problems/unique-paths/</p> <p>https://leetcode-cn.com/problems/minimum-path-sum/</p> <p>https://www.luogu.com.cn/problem/P1004</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/BruceYuj/front-end-interview-summary/edit/master/docs/algorithm/6-dynamic-programming.md" target="_blank" rel="noopener noreferrer">在 Github 上改善此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">4/15/2021, 8:06:50 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front-end-interview-summary/algorithm/5-binary-search-template-2.html" class="prev">
        二分法专题（二）
      </a></span> <span class="next"><a href="/front-end-interview-summary/algorithm/10-big-int-operation.html">
        算法面试套路之 - 大整数运算
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/front-end-interview-summary/assets/js/app.2e0fc13c.js" defer></script><script src="/front-end-interview-summary/assets/js/2.7f7891e4.js" defer></script><script src="/front-end-interview-summary/assets/js/10.007deec9.js" defer></script><script src="/front-end-interview-summary/assets/js/12.bca498eb.js" defer></script>
  </body>
</html>
